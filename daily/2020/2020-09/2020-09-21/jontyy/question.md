# 前端如何找出性能瓶颈

## 思路

看到这个题目，我想的是前端性能优化相关， 比如首屏加载时间，比如 cdn 加速啥的。但是看完答案，发现好像不太对。

答案基本都是解决实际的问题

果然是我想的太简单了。

## 工具

1. <https://gtmetrix.com/> 会给出很多的指导建议
2. performance 可以详细的查看每一段耗时很长的原因 【pc 收银是需要优化的，加载时间太长了】
3. lightHouse 理论上可以打分，但是一直被拦在了登录页，很奇怪 【需要调研】

## 经验

1. 项目中引入了很多的第三方库，某个页面长时间没有关闭，可能会导致浏览器崩溃，这个可能需要查看接近崩溃时间段的运行状态，跟进片段的脚本调用
2. 判断哪里耗时比较多的时候，可以主要看看，是 dom 重绘， 还是 js 脚本执行，递归迭代？
3. 造成性能损耗的一些场景。常见的会有
   1. 大列表的渲染，大量 dom 的渲染
   2. 大量图片的加载
   3. 大量的请求导致性能更不上
   4. 代码中大量耗时的操作，比如循环，递归
   5. 编写的组件过于庞大。层级过深，依赖模块过多。
   6. 查看请求的资源体积是不是过大， 尝试压缩，减少不必要的资源请求，不必要的 js 加载，用字体图标代替图片，用 ae 插件代替动画**常见优化**
4. 优化策略，减少请求数量，压缩请求资源题记，过大的第三方库能不能换成轻量的。
5. 这种交互方式合理吗？ 能换成更好的吗
6. 数据切块，分块加载
7. 是否需要懒加载，缓存配置的规则是什么， 单页面过大是否需要分页
8. 请求时间是否太长，数据是否可以缓存，需要计算的数据能否放在服务端
9. 运行卡顿， 运行环境的支持版本怎么样，运行环境的性能怎么样，是否存在内存泄漏，动画安排合理吗
